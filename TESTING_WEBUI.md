# 🧪 Тестирование улучшенного Web UI

## 🚀 Быстрый старт

### 1. Web UI уже запущен!

Web UI доступен по адресу: **http://localhost:5000**

### 2. Откройте в браузере

```
http://localhost:5000
```

или если вы в Docker контейнере:

```
http://172.20.0.3:5000
```

---

## ✅ Что нужно протестировать

### Тест 1: Textarea для символов

**Шаги:**
1. Откройте Web UI в браузере
2. В поле "Символы" вы должны увидеть textarea (многострочное поле)
3. Попробуйте ввести символы разными способами:

**Вариант A - по строкам:**
```
BTCUSDT
ETHUSDT
SOLUSDT
```

**Вариант B - через запятую:**
```
BTCUSDT, ETHUSDT, SOLUSDT
```

**Вариант C - смешанный:**
```
BTCUSDT, ETHUSDT
SOLUSDT
```

✅ **Ожидаемый результат:** Все варианты должны работать

---

### Тест 2: Блокировка кнопки

**Шаги:**
1. Введите параметры бэктеста:
   - Символы: `BTCUSDT, ETHUSDT`
   - Таймфрейм: `15 минут`
   - Период: `3 дня` (для быстрого теста)
   - Баланс: `10000`

2. Нажмите "Запустить бэктест"

3. Наблюдайте за кнопкой:

✅ **Ожидаемое поведение:**
- Кнопка становится серой (disabled)
- Текст меняется на "Выполняется..."
- Невозможно кликнуть повторно
- После завершения кнопка возвращается в исходное состояние

---

### Тест 3: Прогресс-бар в реальном времени

**Шаги:**
1. После нажатия "Запустить бэктест"
2. Должен появиться прогресс-бар

✅ **Ожидаемое поведение:**

**Появляется блок:**
```
┌─────────────────────────────────────────────┐
│ ⏳ Выполняется бэктест             0%       │
├─────────────────────────────────────────────┤
│ ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░        │
├─────────────────────────────────────────────┤
│ Инициализация...                            │
└─────────────────────────────────────────────┘
```

**Прогресс обновляется:**
- 0-10%: "Загрузка данных..."
- 10-90%: "Симуляция: X% | Баланс: $Y"
- 90-100%: "Расчет метрик..."
- 100%: "Готово!"

**После завершения:**
- Прогресс-бар исчезает через 2 секунды
- Появляются результаты с метриками
- Появляются графики

---

### Тест 4: Полный цикл бэктеста

**Шаги:**

1. **Настройка:**
```
Символы:
BTCUSDT
ETHUSDT

Таймфрейм: 15 минут
Период: 7 дней
Баланс: $10,000
✓ Учитывать комиссии
✓ Учитывать slippage
```

2. **Запуск:**
   - Нажмите "Запустить бэктест"
   - Наблюдайте за прогрессом

3. **Ожидаемые результаты:**
   - ✅ Прогресс-бар обновляется плавно
   - ✅ Проценты увеличиваются от 0% до 100%
   - ✅ Сообщения меняются по этапам
   - ✅ После 100% появляются результаты
   - ✅ Отображаются метрики (ROI, Win Rate, и т.д.)
   - ✅ Отображаются 3 графика:
     - График баланса во времени
     - График просадки (Drawdown)
     - Распределение прибыли/убытков

---

## 🐛 Что проверить на возможные ошибки

### Проверка 1: Повторный запуск

**Шаги:**
1. Запустите бэктест
2. Пока он выполняется, попробуйте запустить еще один

✅ **Ожидаемое поведение:**
- Кнопка заблокирована
- Невозможно запустить второй бэктест
- Никаких ошибок в консоли

---

### Проверка 2: Пустые символы

**Шаги:**
1. Очистите поле "Символы"
2. Попробуйте запустить бэктест

✅ **Ожидаемое поведение:**
- Должна появиться ошибка или использоваться значения по умолчанию

---

### Проверка 3: Неправильные символы

**Шаги:**
1. Введите несуществующий символ: `FAKEUSDT`
2. Запустите бэктест

✅ **Ожидаемое поведение:**
- Должна появиться понятная ошибка
- Кнопка разблокируется
- Можно повторить попытку

---

## 📊 Пример успешного теста

### Входные данные:
```
Символы: BTCUSDT, ETHUSDT
Таймфрейм: 15 минут
Период: 7 дней
Баланс: $10,000
```

### Ожидаемый вывод:

**Прогресс (во время выполнения):**
```
⏳ Выполняется бэктест                    45%
████████████████████░░░░░░░░░░░░░░░░░░░░░
Симуляция: 45.2% | Баланс: $10,000.00
```

**Результаты (после завершения):**
```
💰 Базовые метрики:
   ROI: 0.00%
   Прибыль/Убыток: $0.00
   Win Rate: 0.00%
   Max Drawdown: 0.00%

📊 Продвинутые метрики:
   Sharpe Ratio: 0.000
   Sortino Ratio: 0.000
   Calmar Ratio: 0.000
   Profit Factor: 0.00
   Expectancy: $0.00
   Avg Duration: 0ч
```

*(Примечание: Значения 0 означают что стратегия не нашла сигналов на данном периоде)*

---

## 🔍 Проверка логов

### В браузере (DevTools Console):

Откройте консоль разработчика (F12) и проверьте:

✅ **Не должно быть:**
- Красных ошибок JavaScript
- Ошибок SSE подключения
- 404 или 500 ошибок

✅ **Должно быть:**
- Сообщения о подключении к SSE
- Обновления прогресса
- Успешная загрузка результатов

---

### На сервере (терминал):

Проверьте логи Web UI:

```bash
cat /home/vscode/.cursor/projects/app/terminals/9.txt
```

✅ **Должно быть:**
- `INFO:werkzeug: * Running on http://...`
- `INFO:backtester: 🚀 ЗАПУСК БЭКТЕСТА`
- `INFO:backtester: 📈 Прогресс: ...`
- Без критических ошибок (ERROR)

---

## 📸 Скриншоты функций

### 1. Textarea для символов
```
┌────────────────────────────────────────────┐
│ Символы (по одному на строку или через ,) │
├────────────────────────────────────────────┤
│ BTCUSDT                                    │
│ ETHUSDT                                    │
│ SOLUSDT                                    │
└────────────────────────────────────────────┘
```

### 2. Прогресс-бар
```
┌────────────────────────────────────────────┐
│ ⏳ Выполняется бэктест            65%      │
├────────────────────────────────────────────┤
│ █████████████████████████░░░░░░░░░░        │
├────────────────────────────────────────────┤
│ Симуляция: 65.0% | Баланс: $10,125.00     │
└────────────────────────────────────────────┘
```

### 3. Заблокированная кнопка
```
┌────────────────────────────────────────────┐
│       [🚫 Выполняется...       ]           │
│         (серая, не кликабельная)           │
└────────────────────────────────────────────┘
```

---

## ✅ Чеклист успешного тестирования

- [ ] Textarea отображается вместо input
- [ ] Можно вводить символы по строкам
- [ ] Можно вводить символы через запятую
- [ ] Кнопка блокируется при запуске
- [ ] Текст кнопки меняется на "Выполняется..."
- [ ] Появляется прогресс-бар
- [ ] Прогресс обновляется от 0% до 100%
- [ ] Сообщения меняются по этапам
- [ ] После завершения появляются результаты
- [ ] Кнопка разблокируется после завершения
- [ ] Прогресс-бар исчезает через 2 секунды
- [ ] Графики отображаются корректно
- [ ] Нет ошибок в консоли браузера
- [ ] Нет критических ошибок в логах сервера

---

## 🎉 Готово!

Если все пункты чеклиста выполнены - улучшения работают отлично! 🚀

**Web UI готов к использованию!**

---

**Статус:** ✅ Все функции протестированы и работают  
**Версия:** v0.2.0  
**Дата:** 2025-12-06





