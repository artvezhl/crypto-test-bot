# üí∏ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ö–æ–º–∏—Å—Å–∏—è–º –∏ Slippage

> **–í–µ—Ä—Å–∏—è:** 0.1.0  
> **–î–∞—Ç–∞:** 2025-12-06  
> **Task:** 4.3 - Realistic Trading Simulation

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–° –≤–µ—Ä—Å–∏–∏ 0.1.0 —Å–∏—Å—Ç–µ–º–∞ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–∏ —Å —É—á–µ—Ç–æ–º:

1. **–ö–æ–º–∏—Å—Å–∏–π –±–∏—Ä–∂–∏** (Bybit fees)
2. **Slippage** (–ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã)

–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, —Ç–∞–∫ –∫–∞–∫ –∫–æ–º–∏—Å—Å–∏–∏ –º–æ–≥—É—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤ —É–±—ã—Ç–æ—á–Ω—É—é!

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤—ã–π –±—ç–∫—Ç–µ—Å—Ç —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏

```python
from backtester import BacktestEngine
from datetime import datetime, timedelta

# –°–æ–∑–¥–∞–µ–º –¥–≤–∏–∂–æ–∫ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞
engine = BacktestEngine()

# –ö–æ–º–∏—Å—Å–∏–∏ –∏ slippage –≤–∫–ª—é—á–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
# engine.use_fees_in_backtest = True       # ‚úÖ –≤–∫–ª—é—á–µ–Ω–æ
# engine.use_slippage_in_backtest = True   # ‚úÖ –≤–∫–ª—é—á–µ–Ω–æ

# –ó–∞–ø—É—Å–∫–∞–µ–º –±—ç–∫—Ç–µ—Å—Ç
results = engine.run_backtest(
    symbols=['BTCUSDT', 'ETHUSDT'],
    interval='15',
    start_date=datetime.now() - timedelta(days=7),
    end_date=datetime.now(),
    initial_balance=10000.0
)

# –°–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–æ–º–∏—Å—Å–∏–∏
print(f"ROI: {results['roi_percent']:.2f}%")
print(f"–í—Å–µ–≥–æ –∫–æ–º–∏—Å—Å–∏–π: ${results['total_fees_paid']:.4f}")
print(f"–í–ª–∏—è–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–π: {(results['total_fees_paid']/10000)*100:.3f}%")
```

### –ü—Ä–∏–º–µ—Ä 2: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏ –∏ –±–µ–∑

```python
# –ë–ï–ó –∫–æ–º–∏—Å—Å–∏–π (–∏–¥–µ–∞–ª—å–Ω—ã–π –º–∏—Ä)
engine_ideal = BacktestEngine()
engine_ideal.use_fees_in_backtest = False
engine_ideal.use_slippage_in_backtest = False
results_ideal = engine_ideal.run_backtest(...)

# –° –∫–æ–º–∏—Å—Å–∏—è–º–∏ (—Ä–µ–∞–ª—å–Ω—ã–π –º–∏—Ä)
engine_real = BacktestEngine()
results_real = engine_real.run_backtest(...)

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
print(f"ROI –∏–¥–µ–∞–ª—å–Ω—ã–π: {results_ideal['roi_percent']:.2f}%")
print(f"ROI —Ä–µ–∞–ª—å–Ω—ã–π: {results_real['roi_percent']:.2f}%")
print(f"–†–∞–∑–Ω–∏—Ü–∞: {results_ideal['roi_percent'] - results_real['roi_percent']:.2f}%")
```

### –ü—Ä–∏–º–µ—Ä 3: –ì–æ—Ç–æ–≤—ã–π —Ç–µ—Å—Ç

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
python src/test_fees_slippage.py
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (Bybit)

```python
engine = BacktestEngine()

# –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
engine.maker_fee_percent = 0.055      # Bybit maker fee
engine.taker_fee_percent = 0.06       # Bybit taker fee
engine.slippage_percent = 0.05        # –¢–∏–ø–∏—á–Ω–æ–µ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ
engine.use_fees_in_backtest = True    # –í–∫–ª—é—á–∏—Ç—å –∫–æ–º–∏—Å—Å–∏–∏
engine.use_slippage_in_backtest = True # –í–∫–ª—é—á–∏—Ç—å slippage
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

```python
# –î–ª—è –¥—Ä—É–≥–æ–π –±–∏—Ä–∂–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä Binance)
engine.maker_fee_percent = 0.04   # Binance VIP 0
engine.taker_fee_percent = 0.075

# –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π slippage
engine.slippage_percent = 0.1

# –û—Ç–∫–ª—é—á–∏—Ç—å slippage –Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–∏—Å—Å–∏–∏
engine.use_slippage_in_backtest = False
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

```python
# –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ –≤ –ë–î
from database import Database

db = Database()
db.set_setting('maker_fee_percent', '0.04')
db.set_setting('taker_fee_percent', '0.075')
db.set_setting('slippage_percent', '0.1')

# –¢–µ–ø–µ—Ä—å –≤—Å–µ –Ω–æ–≤—ã–µ –±—ç–∫—Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è
```

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ö–æ–º–∏—Å—Å–∏–∏

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏:
```python
entry_price = 43000.00  # –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞
position_value = 1000.0  # –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ USDT

# –†–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ (taker –¥–ª—è —Ä—ã–Ω–æ—á–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤)
entry_fee = position_value * (0.06 / 100)
# entry_fee = $0.60
```

–ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏:
```python
exit_price = 43500.00
position_value = 1000.0

exit_fee = position_value * (0.06 / 100)
# exit_fee = $0.60
```

–ò—Ç–æ–≥–æ–≤—ã–π PnL:
```python
gross_pnl = (exit_price - entry_price) / entry_price * position_value
# gross_pnl = $11.63

total_fees = entry_fee + exit_fee
# total_fees = $1.20

net_pnl = gross_pnl - total_fees
# net_pnl = $10.43
```

### Slippage

–ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ (BUY):
```python
base_price = 43000.00
slippage_percent = 0.05

actual_price = base_price * (1 + slippage_percent / 100)
# actual_price = $43,021.50
# –ü–æ–∫—É–ø–∞–µ–º –î–û–†–û–ñ–ï –Ω–∞ 0.05%
```

–ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ (SELL):
```python
base_price = 43000.00
slippage_percent = 0.05

actual_price = base_price * (1 - slippage_percent / 100)
# actual_price = $42,978.50
# –ü—Ä–æ–¥–∞–µ–º –î–ï–®–ï–í–õ–ï –Ω–∞ 0.05%
```

---

## üìà –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ú–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

```python
results = {
    'roi_percent': 8.5,           # ROI —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π
    'total_pnl': 850.0,           # PnL —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π
    'total_fees_paid': 12.45,     # –í—Å–µ–≥–æ –∫–æ–º–∏—Å—Å–∏–π
    'total_entry_fees': 6.23,     # –ö–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ
    'total_exit_fees': 6.22,      # –ö–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
    'profit_factor': 1.8,         # –ü—Ä–∏–±—ã–ª—å/–£–±—ã—Ç–∫–∏ (—Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π)
    ...
}
```

### –û—Ç—á–µ—Ç –≤ –ª–æ–≥–∞—Ö

```
üí∏ –ö–æ–º–∏—Å—Å–∏–∏:
   –í—Å–µ–≥–æ –∫–æ–º–∏—Å—Å–∏–π: $12.4560
   –ö–æ–º–∏—Å—Å–∏–∏ –≤—Ö–æ–¥–∞: $6.2280
   –ö–æ–º–∏—Å—Å–∏–∏ –≤—ã—Ö–æ–¥–∞: $6.2280
   –í–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∞–ª–∞–Ω—Å: 0.125%
```

### –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ —Å–¥–µ–ª–æ–∫

```
üéØ –ò—Å–ø–æ–ª–Ω—è–µ–º –í–ò–†–¢–£–ê–õ–¨–ù–´–ô BUY —Å–∏–≥–Ω–∞–ª –¥–ª—è BTCUSDT
   üí´ Slippage: +0.050% (—Ü–µ–Ω–∞: $43000.00 ‚Üí $43021.50)
   üí∏ –ö–æ–º–∏—Å—Å–∏—è –≤—Ö–æ–¥–∞: $0.6000 (0.060%)

‚úÖ –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è #123 –∑–∞–∫—Ä—ã—Ç–∞. –ü—Ä–∏—á–∏–Ω–∞: take_profit
   üí´ Slippage –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ: -0.050% (—Ü–µ–Ω–∞: $43500.00 ‚Üí $43478.25)
   üí∏ –ö–æ–º–∏—Å—Å–∏—è –≤—ã—Ö–æ–¥–∞: $0.6000 (0.060%)
   PnL: $10.43 USDT (–∫–æ–º–∏—Å—Å–∏–∏: $1.2000 USDT)
```

---

## üí° –í–∞–∂–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å

1. **–í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∏—Å—Å–∏–∏ –∏ slippage** –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ –±—ç–∫—Ç–µ—Å—Ç–∞
2. **–°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏ –∏ –±–µ–∑, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –∏—Ö –≤–ª–∏—è–Ω–∏–µ
3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫ - –º–µ–Ω—å—à–µ —Å–¥–µ–ª–æ–∫ = –º–µ–Ω—å—à–µ –∫–æ–º–∏—Å—Å–∏–π
4. **–£—á–∏—Ç—ã–≤–∞–π—Ç–µ** —á—Ç–æ –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Å–æ–±–µ–Ω–Ω–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –∫ –∫–æ–º–∏—Å—Å–∏—è–º

### ‚ùå –ß–µ–≥–æ –ù–ï –¥–µ–ª–∞—Ç—å

1. **–ù–ï –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ** –∫–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
2. **–ù–ï –∑–∞–±—ã–≤–∞–π—Ç–µ** —á—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω–æ–π –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–π, –Ω–æ —É–±—ã—Ç–æ—á–Ω–æ–π —Å –Ω–∏–º–∏
3. **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** —Å–ª–∏—à–∫–æ–º –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è slippage
4. **–ù–ï –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å** —Ç–æ–ª—å–∫–æ –Ω–∞ –±—ç–∫—Ç–µ—Å—Ç –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–π

---

## üî¨ –¢–∏–ø–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –ö–æ–º–∏—Å—Å–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –±–∏—Ä–∂

| –ë–∏—Ä–∂–∞ | Maker | Taker | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-------|-------|-------|------------|
| Bybit | 0.055% | 0.06% | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å |
| Binance | 0.04% | 0.075% | VIP 0 |
| OKX | 0.08% | 0.1% | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π |
| Bybit VIP 1 | 0.045% | 0.055% | –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—ä–µ–º |

### Slippage –ø–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏

| –ü–∞—Ä–∞ | Slippage | –õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å |
|------|----------|-------------|
| BTCUSDT | 0.01-0.03% | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è |
| ETHUSDT | 0.02-0.05% | –í—ã—Å–æ–∫–∞—è |
| SOLUSDT | 0.05-0.1% | –°—Ä–µ–¥–Ω—è—è |
| –ê–ª—å—Ç–∫–æ–∏–Ω—ã | 0.1-0.5% | –ù–∏–∑–∫–∞—è |

---

## üìö –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ `virtual_positions`

```sql
CREATE TABLE virtual_positions (
    ...
    entry_fee DECIMAL(20, 8) DEFAULT 0,      -- –ö–æ–º–∏—Å—Å–∏—è –ø—Ä–∏ –≤—Ö–æ–¥–µ
    exit_fee DECIMAL(20, 8) DEFAULT 0,       -- –ö–æ–º–∏—Å—Å–∏—è –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
    total_fees DECIMAL(20, 8) DEFAULT 0,     -- –°—É–º–º–∞ –≤—Å–µ—Ö –∫–æ–º–∏—Å—Å–∏–π
    ...
);
```

### –ú–∏–≥—Ä–∞—Ü–∏—è

–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞/–±—ç–∫—Ç–µ—Å—Ç–∞. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ë–î, –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –ü—Ä–∏–º–µ—Ä 1: –í–ª–∏—è–Ω–∏–µ –Ω–∞ ROI

```
–°—Ç—Ä–∞—Ç–µ–≥–∏—è: –°–≤–∏–Ω–≥-—Ç—Ä–µ–π–¥–∏–Ω–≥ –Ω–∞ BTC/ETH
–ü–µ—Ä–∏–æ–¥: 30 –¥–Ω–µ–π
–°–¥–µ–ª–æ–∫: 45

–ë–ï–ó –∫–æ–º–∏—Å—Å–∏–π –∏ slippage:
  ROI: +15.2%
  PnL: +$1,520

–° –∫–æ–º–∏—Å—Å–∏—è–º–∏ –∏ slippage:
  ROI: +12.8%
  PnL: +$1,280
  –ö–æ–º–∏—Å—Å–∏–∏: $240

–†–∞–∑–Ω–∏—Ü–∞: -2.4% ROI (–ø–æ—Ç–µ—Ä—è 15.8% –æ—Ç –ø—Ä–∏–±—ã–ª–∏!)
```

### –ü—Ä–∏–º–µ—Ä 2: –í—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

```
–°—Ç—Ä–∞—Ç–µ–≥–∏—è: –°–∫–∞–ª—å–ø–∏–Ω–≥ 15M
–ü–µ—Ä–∏–æ–¥: 7 –¥–Ω–µ–π
–°–¥–µ–ª–æ–∫: 180

–ë–ï–ó –∫–æ–º–∏—Å—Å–∏–π:
  ROI: +8.5%
  PnL: +$850

–° –∫–æ–º–∏—Å—Å–∏—è–º–∏:
  ROI: -2.3%
  PnL: -$230
  –ö–æ–º–∏—Å—Å–∏–∏: $1,080

–í—ã–≤–æ–¥: –°—Ç—Ä–∞—Ç–µ–≥–∏—è –£–ë–´–¢–û–ß–ù–ê —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π!
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–º–∏—Å—Å–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```python
print(engine.use_fees_in_backtest)  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å True
print(engine.taker_fee_percent)     # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å > 0
```

### Slippage —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π

–£–º–µ–Ω—å—à–∏—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç:
```python
engine.slippage_percent = 0.02  # –í–º–µ—Å—Ç–æ 0.05
```

### –ö–æ–º–∏—Å—Å–∏–∏ –≤ –ë–î –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç 0

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞:
```sql
SELECT entry_fee, exit_fee, total_fees 
FROM virtual_positions 
WHERE status = 'closed' 
LIMIT 5;
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [BACKTESTING_README.md](BACKTESTING_README.md)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python src/test_fees_slippage.py`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
4. –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ GitHub

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-12-06  
**Task:** 4.3 - Realistic Trading Simulation  
**–í–µ—Ä—Å–∏—è:** 0.1.0

